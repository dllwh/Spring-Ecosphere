<?xml version="1.0" encoding="UTF-8"?>
<!-- ConfigurationåŽé¢çš„statusï¼Œè¿™ä¸ªç”¨äºŽè®¾ç½®log4j2è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆtraceæ—¶ï¼Œ ä½ ä¼šçœ‹åˆ°log4j2å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡ºã€‚å¯ä»¥è®¾ç½®æˆOFF(å…³é—­) 
	æˆ– Error(åªè¾“å‡ºé”™è¯¯ä¿¡æ¯)ã€‚ 30s åˆ·æ–°æ­¤é…ç½® -->
<configuration status="WARN" monitorInterval="30">

	<!-- æ—¥å¿—æ–‡ä»¶ç›®å½•ã€åŽ‹ç¼©æ–‡ä»¶ç›®å½•ã€æ—¥å¿—æ ¼å¼é…ç½® -->
	<properties>
		<Property name="fileName">c:/logs/xxxx/api</Property>
		<Property name="fileGz">c:/logs/xxxx/api/7z</Property>
		<Property name="LOG_PATTERN">%d{yyyy-MM-dd HHðŸ‡²ðŸ‡²ss.SSS} [%thread] %-5level %logger{36} - %msg%n</Property>
	</properties>

	<Appenders>
		<!-- è¾“å‡ºæŽ§åˆ¶å°æ—¥å¿—çš„é…ç½® -->
		<Console name="console" target="SYSTEM_OUT">
			<!--æŽ§åˆ¶å°åªè¾“å‡ºlevelåŠä»¥ä¸Šçº§åˆ«çš„ä¿¡æ¯ï¼ˆonMatchï¼‰ï¼Œå…¶ä»–çš„ç›´æŽ¥æ‹’ç»ï¼ˆonMismatchï¼‰ -->
			<ThresholdFilter level="debug" onMatch="ACCEPT" onMismatch="DENY" />
			<!-- è¾“å‡ºæ—¥å¿—çš„æ ¼å¼ -->
			<PatternLayout pattern="${LOG_PATTERN}" />
		</Console>

		<!-- æ‰“å°å‡ºæ‰€æœ‰çš„ä¿¡æ¯ï¼Œæ¯æ¬¡å¤§å°è¶…è¿‡sizeï¼Œåˆ™è¿™sizeå¤§å°çš„æ—¥å¿—ä¼šè‡ªåŠ¨å­˜å…¥æŒ‰å¹´ä»½-æœˆä»½å»ºç«‹çš„æ–‡ä»¶å¤¹ä¸‹é¢å¹¶è¿›è¡ŒåŽ‹ç¼©ï¼Œä½œä¸ºå­˜æ¡£ -->
		<RollingRandomAccessFile name="infoFile" fileName="${fileName}/web-info.log" immediateFlush="false"
			filePattern="${fileGz}/$${date:yyyy-MM}/%d{yyyy-MM-dd}-%i.web-info.gz">
			<PatternLayout pattern="${LOG_PATTERN}" />
			<Policies>
				<SizeBasedTriggeringPolicy size="20 MB" />
			</Policies>

			<Filters>
				<!-- åªè®°å½•infoå’Œwarnçº§åˆ«ä¿¡æ¯ -->
				<ThresholdFilter level="error" onMatch="DENY" onMismatch="NEUTRAL" />
				<ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="DENY" />
			</Filters>

			<!-- æŒ‡å®šæ¯å¤©çš„æœ€å¤§åŽ‹ç¼©åŒ…ä¸ªæ•°ï¼Œé»˜è®¤7ä¸ªï¼Œè¶…è¿‡äº†ä¼šè¦†ç›–ä¹‹å‰çš„ -->
			<DefaultRolloverStrategy max="50" />
		</RollingRandomAccessFile>

		<!-- å­˜å‚¨æ‰€æœ‰errorä¿¡æ¯ -->
		<RollingRandomAccessFile name="errorFile" fileName="${fileName}/web-error.log" immediateFlush="false"
			filePattern="${fileGz}/$${date:yyyy-MM}/%d{yyyy-MM-dd}-%i.web-error.gz">
			<PatternLayout pattern="${LOG_PATTERN}" />

			<Policies>
				<SizeBasedTriggeringPolicy size="50 MB" />
			</Policies>

			<Filters>
				<!-- åªè®°å½•errorçº§åˆ«ä¿¡æ¯ -->
				<ThresholdFilter level="error" onMatch="ACCEPT"
					onMismatch="DENY" />
			</Filters>

			<!-- æŒ‡å®šæ¯å¤©çš„æœ€å¤§åŽ‹ç¼©åŒ…ä¸ªæ•°ï¼Œé»˜è®¤7ä¸ªï¼Œè¶…è¿‡äº†ä¼šè¦†ç›–ä¹‹å‰çš„ -->
			<DefaultRolloverStrategy max="50" />
		</RollingRandomAccessFile>

		<File name="log4jdbc_delete" fileName="c:/logs/xxxx/api/log4jdbc_delete.log">
			<MarkerFilter marker="LOG4JDBC_DELETE" onMatch="ACCEPT" onMismatch="DENY" />
			<PatternLayout pattern="%d %-5p %t (%c:%L) - %m%n" />
		</File>
		<File name="log4jdbc_insert" fileName="c:/logs/xxxx/api/log4jdbc_insert.log">
			<MarkerFilter marker="LOG4JDBC_INSERT" onMatch="ACCEPT" onMismatch="DENY" />
			<PatternLayout pattern="%d %-5p %t (%c:%L) - %m%n" />
		</File>
		<File name="log4jdbc_update" fileName="c:/logs/xxxx/api/log4jdbc_update.log">
			<MarkerFilter marker="LOG4JDBC_UPDATE" onMatch="ACCEPT" onMismatch="DENY" />
			<PatternLayout pattern="%d %-5p %t (%c:%L) - %m%n" />
		</File>
		<File name="log4jdbc_select" fileName="c:/logs/xxxx/api/log4jdbc_select.log">
			<MarkerFilter marker="LOG4JDBC_SELECT" onMatch="ACCEPT" onMismatch="DENY" />
			<PatternLayout pattern="%d %-5p %t (%c:%L) - %m%n" />
		</File>

	</Appenders>

	<Loggers>
		<logger name="org.springframework.aop.framework.CglibAopProxy" level="ERROR" additivity="false" />
		<logger name="springfox.documentation" level="ERROR" additivity="false" />
		<logger name="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"
			level="ERROR" additivity="false" />
		<logger name="org.springframework.core.env.PropertySourcesPropertyResolver" level="ERROR" additivity="false" />
		<logger name="org.springframework.web.servlet.DispatcherServlet" level="ERROR" additivity="false" />
		<logger name="io.undertow.servlet" level="ERROR" additivity="false" />
		<logger name="org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod" level="TRACE" />

		<logger name="jdbc.sqlonly" level="INFO" additivity="false" />
		<logger name="jdbc.resultset" level="INFO" additivity="false" />
		<logger name="jdbc.connection" level="INFO" additivity="false" />
		<logger name="jdbc.audit" level="INFO" additivity="false" />
		<logger name="jdbc.sqltiming" level="INFO" additivity="false">
			<appender-ref ref="console" />
		</logger>

		<!--é¡¹ç›®æ—¥å¿—ç­‰çº§ -->
		<logger name="com.junko" level="DEBUG" />

		<logger name="log4jdbc.debug" level="INFO" additivity="false">
			<appender-ref ref="console" />
		</logger>

		<!-- åŒæ­¥å¼‚æ­¥æ··åˆçš„æ–¹å¼è¿›è¡Œå†™æ—¥å¿— -->
		<AsyncLogger name="AsyncLogger" level="INFO"
			includeLocation="true">
			<appender-ref ref="console" />
			<appender-ref ref="infoFile" />
			<appender-ref ref="errorFile" />
		</AsyncLogger>
		<asyncRoot level="INFO" includeLocation="true">
			<appender-ref ref="console" />
			<appender-ref ref="infoFile" />
			<appender-ref ref="errorFile" />
		</asyncRoot>

		<logger name="log4jdbc.log4j2" level="info" additivity="false">
			<MarkerFilter marker="LOG4JDBC_OTHER" onMatch="DENY" onMismatch="NEUTRAL" />
			<appender-ref ref="log4jdbc_insert" />
			<appender-ref ref="log4jdbc_delete" />
			<appender-ref ref="log4jdbc_update" />
			<appender-ref ref="log4jdbc_select" />
			<appender-ref ref="console" />
		</logger>
	</Loggers>

</configuration>